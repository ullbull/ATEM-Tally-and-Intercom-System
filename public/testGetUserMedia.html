<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Test getUserMedia</title>
</head>

<body>
   <h1>Test getUserMedia</h1>
   <p><button id="test">test</button></p>

   <audio id="mic" controls></audio>

   <script>
      const testButton = document.getElementById("test");
      testButton.onclick = function () {
         testButton.disabled = true;

         navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;

         const constraints = {
            audio: true,
            //   video: false
         };
         //   var video = document.querySelector('video');

         function successCallback(stream) {
            console.log(stream);
            document.getElementById("mic").srcObject = stream;
            document.getElementById("mic").play();
         }

         function errorCallback(error) {
            console.log('navigator.getUserMedia error: ', error);
         }

         navigator.getUserMedia(constraints, successCallback, errorCallback);
      };
   </script>
</body>

</html>